variables:
  pdir: 'bmi-Flutter'

trigger:
- master

jobs:
  - job: Android
    pool:
     vmImage: 'macos-latest'

    steps:
      - task: FlutterInstall@0
        inputs:
            channel: 'stable'
            version: 'latest'

      - task: FlutterBuild@0
        inputs:
          target: 'apk'
          projectDirectory: $(Build.SourcesDirectory)
          buildNumber: ''
      
      

      - task: PublishBuildArtifacts@1
        inputs:
          PathtoPublish: '$(Build.ArtifactStagingDirectory)'
          ArtifactName: 'drop'
          publishLocation: 'Container'

      - task: DownloadBuildArtifacts@1
        inputs:
          buildType: 'current'
          downloadType: 'single'
          artifactName: 'drop'
          downloadPath: '$(System.ArtifactsDirectory)'

